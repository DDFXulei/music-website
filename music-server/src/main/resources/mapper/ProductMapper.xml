<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.demo.dao.ProductMapper">
	<resultMap id="BaseResultMap"
		type="com.example.demo.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="PRODUCT_ID" property="productId" jdbcType="BIGINT" />
		<result column="PRODUCT_TYPE" property="productTypeId" jdbcType="BIGINT" />
		<result column="PRODUCT_NAME" property="productName" jdbcType="VARCHAR" />
		<result column="PRODUCT_TITLE" property="productTitle" jdbcType="VARCHAR" />
		<result column="PRODUCT_PIC" property="productPic" jdbcType="VARCHAR" />
		<result column="PRODUCT_INTRO" property="productIntro" jdbcType="LONGVARCHAR" />
		<result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
		<result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" />
		<result column="PRODUCT_FEATURE_ID" property="productFeatureId" jdbcType="VARCHAR" />
		<result column="PRODUCT_PARAM" property="productParam" jdbcType="VARCHAR" />
		<association property="productType" javaType="com.example.demo.domain.ProductType" >
			<!-- id:声明主键，表示 PRODUCT_TYPE_ID 是关联查询对象的唯一标识-->
			<id column="PRODUCT_TYPE_ID" property= "productTypeId"/>
			<result property="productTypeName" column="PRODUCT_TYPE_NAME" />
		</association>
	</resultMap>
	<resultMap id="ResultMapWithBLOBs"
		type="com.example.demo.domain.Product" extends="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<result column="PRODUCT_INTRO" property="productIntro"
			jdbcType="LONGVARCHAR" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		PRODUCT_ID, PRODUCT_TYPE, PRODUCT_NAME, PRODUCT_TITLE, PRODUCT_PIC,
		CREATE_TIME,UPDATE_TIME, PRODUCT_FEATURE_ID, PRODUCT_PARAM, PRODUCT_TYPE_NAME
	</sql>
	<sql id="Blob_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		PRODUCT_INTRO
	</sql>
	<insert id="addProduct"
		parameterType="com.example.demo.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into product_main
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="productId != null">
				PRODUCT_ID,
			</if>
			<if test="productTypeId != null">
				PRODUCT_TYPE,
			</if>
			<if test="productName != null">
				PRODUCT_NAME,
			</if>
			<if test="productTitle != null">
				PRODUCT_TITLE,
			</if>
			<if test="productPic != null">
				PRODUCT_PIC,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="updateTime != null">
				UPDATE_TIME,
			</if>
			<if test="productFeatureId != null">
				PRODUCT_FEATURE_ID,
			</if>
			<if test="productParam != null">
				PRODUCT_PARAM,
			</if>
			<if test="productIntro != null">
				PRODUCT_INTRO,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="productId != null">
				#{productId,jdbcType=BIGINT},
			</if>
			<if test="productTypeId != null">
				#{productTypeId,jdbcType=BIGINT},
			</if>
			<if test="productName != null">
				#{productName,jdbcType=VARCHAR},
			</if>
			<if test="productTitle != null">
				#{productTitle,jdbcType=VARCHAR},
			</if>
			<if test="productPic != null">
				#{productPic,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="updateTime != null">
				#{updateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="productFeatureId != null">
				#{productFeatureId,jdbcType=VARCHAR},
			</if>
			<if test="productParam != null">
				#{productParam,jdbcType=VARCHAR},
			</if>
			<if test="productIntro != null">
				#{productIntro,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<delete id="deleteByProuductId" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from PRODUCT_MAIN
		where PRODUCT_ID =
		#{productId,jdbcType=BIGINT}
	</delete>
	<update id="updateProduct"
		parameterType="com.example.demo.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update product_main
		<set>
			<if test="productTypeId != null">
				PRODUCT_TYPE = #{productTypeId,jdbcType=BIGINT},
			</if>
			<if test="productName != null">
				PRODUCT_NAME = #{productName,jdbcType=VARCHAR},
			</if>
			<if test="productTitle != null">
				PRODUCT_TITLE = #{productTitle,jdbcType=VARCHAR},
			</if>
			<if test="productPic != null">
				PRODUCT_PIC = #{productPic,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="updateTime != null">
				UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="productFeatureId != null">
				PRODUCT_FEATURE_ID =
				#{productFeatureId,jdbcType=VARCHAR},
			</if>
			<if test="productParam != null">
				PRODUCT_PARAM = #{productParam,jdbcType=VARCHAR},
			</if>
			<if test="productIntro != null">
				PRODUCT_INTRO = #{productIntro,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where PRODUCT_ID = #{productId,jdbcType=BIGINT}
	</update>
	<update id="updateProductPic"
		parameterType="com.example.demo.domain.Product">
		update PRODUCT_MAIN
		<set>
			<if test="productPic != null">
				PRODUCT_PIC = #{productPic,jdbcType=VARCHAR},
			</if>
		</set>
		where PRODUCT_ID = #{productId,jdbcType=BIGINT}

	</update>
	<update id="updateProductParam"
		parameterType="com.example.demo.domain.Product">
		update PRODUCT_MAIN
		<set>
			<if test="productParam != null">
				PRODUCT_PARAM = #{productParam,jdbcType=VARCHAR},
			</if>
		</set>
		where PRODUCT_ID = #{productId,jdbcType=BIGINT}

	</update>
	<select id="allProducts" resultMap="BaseResultMap">
		select 
			M.PRODUCT_ID,M.PRODUCT_TYPE,M.PRODUCT_NAME,M.PRODUCT_TITLE,M.PRODUCT_PIC,M.PRODUCT_INTRO,M.CREATE_TIME,M.UPDATE_TIME,M.PRODUCT_FEATURE_ID,
			M.PRODUCT_PARAM,T.PRODUCT_TYPE_ID,T.PRODUCT_TYPE_NAME
		from 
			PRODUCT_MAIN M
		left join PRODUCT_TYPE T on M.PRODUCT_TYPE = T.PRODUCT_TYPE_ID
	</select>
	<select id="productOfId" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		select *
		from PRODUCT_MAIN
		where PRODUCT_ID = #{productId,
		jdbcType=BIGINT}
	</select>
	<!-- ABOVE -->
	
	<update id="updateByPrimaryKeyWithBLOBs"
		parameterType="com.example.demo.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update product_main
		set PRODUCT_TYPE = #{productTypeId,jdbcType=BIGINT},
		PRODUCT_NAME = #{productName,jdbcType=VARCHAR},
		PRODUCT_TITLE =
		#{productTitle,jdbcType=VARCHAR},
		PRODUCT_PIC =
		#{productPic,jdbcType=VARCHAR},
		CREATE_TIME =
		#{createTime,jdbcType=TIMESTAMP},
		UPDATE_TIME =
		#{updateTime,jdbcType=TIMESTAMP},
		PRODUCT_FEATURE_ID =
		#{productFeatureId,jdbcType=VARCHAR},
		PRODUCT_PARAM =
		#{productParam,jdbcType=VARCHAR},
		PRODUCT_INTRO =
		#{productIntro,jdbcType=LONGVARCHAR}
		where PRODUCT_ID =
		#{productId,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey"
		parameterType="com.example.demo.domain.Product">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update product_main
		set PRODUCT_TYPE = #{productTypeId,jdbcType=BIGINT},
		PRODUCT_NAME = #{productName,jdbcType=VARCHAR},
		PRODUCT_TITLE =
		#{productTitle,jdbcType=VARCHAR},
		PRODUCT_PIC =
		#{productPic,jdbcType=VARCHAR},
		CREATE_TIME =
		#{createTime,jdbcType=TIMESTAMP},
		UPDATE_TIME =
		#{updateTime,jdbcType=TIMESTAMP},
		PRODUCT_FEATURE_ID =
		#{productFeatureId,jdbcType=VARCHAR},
		PRODUCT_PARAM =
		#{productParam,jdbcType=VARCHAR}
		where PRODUCT_ID =
		#{productId,jdbcType=BIGINT}
	</update>


	<select id="productOfName" resultMap="ResultMapWithBLOBs">
		select *
		from PRODUCT_MAIN
		where PRODUCT_NAME like #{productName,jdbcType=VARCHAR}
	</select>
	<select id="productOfType" parameterType="java.lang.Long"
		resultMap="ResultMapWithBLOBs">
		select *
		from PRODUCT_MAIN
		where PRODUCT_TYPE =
		#{productTypeId,jdbcType=BIGINT}
	</select>

</mapper>